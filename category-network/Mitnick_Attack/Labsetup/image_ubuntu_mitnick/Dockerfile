FROM ubuntu:20.04
ARG DEBIAN_FRONTEND=noninteractive

# Ubuntu Layer 1
RUN apt-get update  \
    && apt-get -y install  \
        binutils \
        curl   \
        iproute2  \
        iputils-ping \
        nano   \
        net-tools \
        unzip

# Ubuntu Layer 2
RUN apt-get update  \
    && apt-get -y install  \
        arping \
        conntrack \
        curl   \
        dnsutils  \
        iptables \
        mtr-tiny  \
        netcat \
        openbsd-inetd  \
        procps \
        tcpdump   \
        telnet \
        telnetd \
    && rm -rf /var/lib/apt/lists/*

# Create the "seed" user account
# Change seed's and root's passwords to "dees"
RUN  useradd -m -s /bin/bash seed \
     && echo "root:dees" | chpasswd \
     && echo "seed:dees" | chpasswd 
 
COPY bashrc /home/seed/.bashrc
COPY bashrc /root/.bashrc

COPY start.sh /
RUN  chmod +x /start.sh

CMD [ "/start.sh"]

#### The above is the same as the image_ubuntu image
#### This way, we can reuse these laysers 

# Extra package needed by the Mitnick Attack Lab
RUN apt-get update \
    && apt-get -y install \
          rsh-redone-client \
          rsh-redone-server \
    && rm -rf /var/lib/apt/lists/*

